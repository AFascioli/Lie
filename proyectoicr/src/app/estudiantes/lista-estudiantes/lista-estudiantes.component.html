<mat-card *ngIf="isLoading">
  <mat-spinner class="spinner" [diameter]="60"></mat-spinner>
</mat-card>

<mat-card *ngIf="estudiantes.length > 0 && !isLoading">
  <div *ngFor="let estudiante of estudiantes; let i = index">
    <mat-expansion-panel [expanded]="'i == 0'">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <b class="titulo-expansion-panel">
            {{ estudiante.apellido }}, {{ estudiante.nombre }} -
            {{ estudiante.tipoDocumento }}: {{ estudiante.numeroDocumento }}</b
          ><b class="titulo-expansion-panel" *ngIf="inscripto[i]">&nbsp;- Curso: {{ this.cursos[i] }} </b>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div
        class="grid-container"
        [class.grid-container-mobile]="mobileQuery.matches"
        [class.no-inscripto]="!inscripto[i]"
        [class.rol-docente]="rol == 'Docente'"
        [class.suspendido]="suspendido[i]"
      >
        <mat-card
          class="opcion"
          [class.opcion-mobile]="mobileQuery.matches"
          (click)="onInscribir(i)"
          *ngIf="permisos.inscribirEstudiante > 1"
          ><b>Inscribir estudiante a un curso</b></mat-card
        >
        <mat-card
          class="opcion"
          [class.opcion-mobile]="mobileQuery.matches"
          (click)="onJustificar(i)"
          *ngIf="permisos.asistencia > 1 && inscripto[i]"
          ><b>Justificar inasistencia</b></mat-card
        >
        <mat-card
          class="opcion"
          [class.opcion-mobile]="mobileQuery.matches"
          (click)="onRegistrarAR(i)"
          *ngIf="permisos.inscribirEstudiante > 1"
          ><b>Registrar adulto responsable</b></mat-card
        >
        <mat-card
          class="opcion"
          [class.opcion-mobile]="mobileQuery.matches"
          (click)="onRegistrarExamenes(i)"
          *ngIf="
            permisos.notas > 1 &&
            inscripto[i] &&
            correspondeRegistrarExamen(i) &&
            materiasPendientes[i]
          "
          ><b>Registrar calificaciones de examen</b></mat-card
        >
        <mat-card
          class="opcion"
          [class.opcion-mobile]="mobileQuery.matches"
          (click)="onLlegadaTarde(i)"
          *ngIf="permisos.asistencia > 1 && inscripto[i]"
          ><b>Registrar llegada tarde</b></mat-card
        >
        <mat-card
          class="opcion"
          [class.opcion-mobile]="mobileQuery.matches"
          (click)="onRetiro(i)"
          *ngIf="permisos.asistencia > 1 && inscripto[i]"
          ><b>Registrar retiro anticipado</b></mat-card
        >
        <mat-card
          class="opcion"
          [class.opcion-mobile]="mobileQuery.matches"
          (click)="onSancion(i)"
          *ngIf="permisos.sanciones >= 1 && inscripto[i]"
          ><b>Registrar sanción</b></mat-card
        >
        <mat-card
          class="opcion"
          [class.opcion-mobile]="mobileQuery.matches"
          (click)="onMostrar(i)"
          *ngIf="permisos.inscribirEstudiante >= 1"
          ><b>Visualizar estudiante</b></mat-card
        >
        <mat-card
          class="opcion"
          [class.opcion-mobile]="mobileQuery.matches"
          (click)="onVisualizarPerfil(i)"
          *ngIf="permisos.inscribirEstudiante >= 1 && inscripto[i]"
          ><b>Visualizar perfil de estudiante</b></mat-card
        >
        <mat-card
          class="opcion"
          [class.opcion-mobile]="mobileQuery.matches"
          (click)="onReincorporar(i)"
          *ngIf="permisos.inscribirEstudiante >= 1 && suspendido[i]"
          ><b>Reincorporar estudiante</b></mat-card
        >
        <mat-card
          class="opcion"
          [class.opcion-mobile]="mobileQuery.matches"
          (click)="onNotificarReunion(i)"
          ><b>Enviar notificación de reunión</b></mat-card
        >
      </div>
    </mat-expansion-panel>
  </div>
</mat-card>

<mat-card *ngIf="estudiantes.length == 0 && !isLoading">
  <p>
    <b>No se encontraron estudiantes que coincidan con los datos ingresados</b>
  </p>
</mat-card>
