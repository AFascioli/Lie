<h1 class="componente-titulo">
  Modificar evento
</h1>

<mat-card class="card-body-componente">
  <form #form="ngForm">
    <div class="campos-formulario">
      <mat-form-field [class.mat-form-field-mobile]="mobileQuery.matches">
        <input
          name="titulo"
          ngModel
          #titulo="ngModel"
          matInput
          placeholder="Ingrese título"
          type="text"
          [(ngModel)]="evento.titulo"
          required
        />
      </mat-form-field>
      <br />
      <mat-form-field [class.mat-form-field-mobile]="mobileQuery.matches">
        <textarea
          matInput
          name="descripcion"
          ngModel
          #descripcion="ngModel"
          rows="3"
          placeholder="Ingrese descripción"
          type="text"
          [(ngModel)]="evento.descripcion"
        >
        </textarea>
      </mat-form-field>
      <br />
      <mat-form-field [class.mat-form-field-mobile]="mobileQuery.matches">
        <input
          matInput
          name="fechaEvento"
          ngModel
          #fechaEvento="ngModel"
          [min]="fechaActual"
          [matDatepicker]="picker"
          placeholder="Seleccione fecha de evento"
          (click)="picker.open()"
          required
          readonly
          [(ngModel)]="evento.fechaEvento"
        />
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker touchUi #picker></mat-datepicker>
      </mat-form-field>
      <div>
        <mat-form-field class="mat-form-hora" [class.mat-form-hora-mobile]="mobileQuery.matches">
          <div class="hora">
            <input
              matInput
              name="horaInicio"
              ngModel
              #horaInicio="ngModel"
              placeholder="Hora inicio *"
              id="pickerInicio"
              [(ngModel)]="evento.horaInicio"
            />
          </div>
        </mat-form-field>
        &nbsp;
        <mat-form-field class="mat-form-hora" [class.mat-form-hora-mobile]="mobileQuery.matches">
          <div class="hora">
            <input
              matInput
              name="horaFin"
              ngModel
              #horaFin="ngModel"
              placeholder="Hora fin *"
              id="pickerFin"
              [(ngModel)]="evento.horaFin"
            />
          </div>
        </mat-form-field>
      </div>

      <mat-form-field class="chip-list" [class.mat-form-field-mobile]="mobileQuery.matches">
        <mat-chip-list #chipList aria-label="Seleccion de chips">
          <mat-chip
            *ngFor="let chip of chips"
            [selectable]="selectable"
            [removable]="removable"
            (removed)="remove(chip)"
          >
            {{ chip }}
            <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
          </mat-chip>
          <input
            placeholder="Seleccione los cursos *"
            #chipsInput
            [formControl]="chipsCtrl"
            [matAutocomplete]="auto"
            [matChipInputFor]="chipList"
            [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
            [matChipInputAddOnBlur]="addOnBlur"
            (matChipInputTokenEnd)="add($event)"
            required
          />
        </mat-chip-list>
        <mat-autocomplete
          required
          #auto="matAutocomplete"
          (optionSelected)="selected($event)"
        >
          <mat-option *ngFor="let chip of filteredChips | async" [value]="chip">
            {{ chip }}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
      <div>
        <div class="contenedor-flexbox">
          <button
            mat-stroked-button
            class="boton-seleccionar"
            type="button"
            (click)="file.click()"
          >
            Seleccionar imagenes
          </button>
        </div>
        <input
          #file
          type="file"
          accept="image/*"
          (imageSelected)="cargarImagen($event)"
          imageUpload
          [resizeOptions]="resizeOptions"
          multiple
        />
      </div>
    </div>
    <div *ngIf="imagenesCargadas.length != 0">
      <div class="slideshow-container">
        <div *ngFor="let image of imagenesCargadas; let i = index">
          <div class="mySlides fade">
            <img [src]="image" style="width: 100%;" />
          </div>
        </div>
        <a
          class="prev"
          (click)="moveFromCurrentSlide(-1)"
          *ngIf="imagenesCargadas.length != 1"
          >&#10094;</a
        >
        <a
          class="next"
          (click)="moveFromCurrentSlide(1)"
          *ngIf="imagenesCargadas.length != 1"
          >&#10095;</a
        >
      </div>
      <br />
      <div *ngIf="evento.filenames.length > 1" style="text-align: center;">
        <span class="dot" *ngFor="let image of imagenesCargadas"></span>
      </div>
    </div>
    <div class="div-button">
      <button
        class="button-primary"
        (click)="onGuardarEvento(form)"
        mat-raised-button
        [disabled]="!form.dirty"
      >
        Guardar
      </button>
      <button mat-raised-button (click)="popUpCancelar()" class="button-warn">
        Cancelar
      </button>
    </div>
  </form>
</mat-card>
